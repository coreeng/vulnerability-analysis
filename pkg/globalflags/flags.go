package globalflags

import (
	"github.com/pkg/errors"
	"github.com/spf13/cobra"
)

const (
	ConfigFlag = "config"
)

var (
	config string
)

func Config(cmd *cobra.Command) (*string, error) {
	n, err := cmd.Flags().GetString(ConfigFlag)
	if err != nil {
		return nil, errors.Wrapf(err, "Failed to retrieve command line flag %s, err: %v", ConfigFlag, err)
	}
	return &n, nil
}

func InitGlobalCmdFlags(cmd *cobra.Command) {
	cmd.PersistentFlags().StringVarP(&config, ConfigFlag, "c", "./config/config.yaml", "config")
}
