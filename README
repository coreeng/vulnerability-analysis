# Vulnerability Analysis
## What's this tool?
The goal of this tool is to be used during image promotion. Based on the exit code, it should allow or block certain images from being promoted based on the security vulnerabilities
Exit codes:
* 0: Image was found has the number of vulnerabilities below the thresholds
* 1: Image scan exceeds the thresholds
* 2: Something went wrong on the execution (eg, report for the image not found)

## Usage
```bash
make build
./vulcheck trivy <namespace> <registry>/<imageName>:<imageVersion>
```
## Supported Integrations
The goal of this tool is to support multiple vulnerability scanner integration. Currently supporting:
* Trivy

## Testing
For testing, we're spinning up a minikube and adding the necessary CRDs and resources. For local development you can execute:
```bash
minikube start
make apply-test-resources
```

## Defaults Thresholds
This tool will analyse the number of vulnerabilities and based on a threshold it will either succeed or fail. The current defaults are
* Critical: 2
* High : - 
* Medium: - 
* Low: -
* Unknown: -

