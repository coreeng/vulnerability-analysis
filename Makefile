
.PHONY: default
default: help

.PHONY: help
help: Makefile
	@echo "Usage: "
	@sed -n 's/^##[ -]/   /p' Makefile
	@echo ""


## make build					Build golang app
.PHONY: build
build: 
	go build -o vulcheck ./cmd/vulnerability-analysis/main.go

## make test					Run unit tests for golang app
.PHONY: test
test: 
	go test ./...

## make run					Runs golang app
.PHONY: run
run: build
	./vulcheck trivy argocd index.docker.io/bitnami/etcd:3.5.12-debian-11-r2
